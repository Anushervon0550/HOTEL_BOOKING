# Hotel Booking API

## Описание

Серверное приложение для бронирования номеров в отеле с поддержкой ролей пользователей (user, manager, admin), JWT-аутентификацией, разграничением доступа и документацией Swagger.

## Основные возможности

- Регистрация и вход пользователей (JWT)
- Роли: user (гость), manager, admin
- Просмотр и бронирование комнат
- Управление комнатами (manager, admin)
- Управление пользователями (admin)
- Просмотр всех бронирований (manager, admin)
- Swagger UI для тестирования API

## Запуск

1. Склонируйте репозиторий и перейдите в папку проекта.
2. Настройте переменные окружения в `.env` (пример):
   ```
   DB_PASSWORD=postgres
   JWT_SECRET_KEY=your-secret-key
   ```
3. Настройте параметры в `configs.json` (БД, порт и т.д.).
4. Установите зависимости:
   ```
   go mod tidy
   ```
5. Запустите приложение:
   ```
   go run main.go
   ```

## Документация API

Swagger UI доступен по адресу:  
[http://localhost:8080/swagger/index.html](http://localhost:8080/swagger/index.html)

## Роли и права

- **user/guest**: смотреть комнаты, бронировать, отменять свои брони, смотреть свой профиль и бронирования.
- **manager**: всё, что user, плюс создание, редактирование, удаление комнат, просмотр всех бронирований.
- **admin**: всё, что manager, плюс управление пользователями (просмотр, удаление, смена роли).

## Работа с ролями

- При регистрации роль всегда "user".
- Изменить роль может только admin через эндпоинт:
  ```
  PUT /users/{id}/role
  {
    "role": "admin" // или "manager"
  }
  ```

## Примеры запросов

**Регистрация:**
```
POST /auth/sign-up
{
  "full_name": "Иван Иванов",
  "username": "ivan",
  "password": "123456"
}
```

**Вход:**
```
POST /auth/sign-in
{
  "username": "ivan",
  "password": "123456"
}
```

**Бронирование комнаты:**
```
POST /bookings
{
  "room_id": 1,
  "start_date": "2025-07-01",
  "end_date": "2025-07-05"
}
```

## Лицензия

MIT

